{"ast":null,"code":"import { h, computed, toRefs, resolveComponent, resolveDirective, withDirectives, watch } from 'vue';\nimport { Field, useField } from 'vee-validate';\nimport useRules from '@/compositions/useRules';\nexport default {\n  props: { ...Field.props,\n    type: {\n      default: 'text',\n      type: String\n    },\n    disabled: {\n      default: false,\n      type: Boolean\n    }\n  },\n\n  setup(props, {\n    expose\n  }) {\n    const AppErrMsg = resolveComponent('AppErrorMessage');\n    const AppLabel = resolveComponent('AppLabel');\n    const vmaska = resolveDirective('maska');\n    const {\n      type,\n      label,\n      rules,\n      name,\n      disabled\n    } = toRefs(props);\n    const {\n      value,\n      errorMessage,\n      handleChange\n    } = useField(name, rules, {\n      validateOnValueUpdate: true,\n      label: props.label\n    });\n    expose({\n      handleChange\n    });\n    const isTextArea = computed(() => type.value === 'textarea');\n    const {\n      hasRequiredRule\n    } = useRules(rules);\n    return () => {\n      const inputSrc = h(isTextArea.value ? 'textarea' : 'input', {\n        disabled: disabled.value,\n        id: props.name,\n        name: props.name,\n        class: ['tw-block tw-w-full tw-rounded-md tw-border-0 tw-py-1.5 tw-text-gray-900 tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-300 placeholder:tw-text-gray-400 focus:tw-ring-2 focus:tw-ring-inset focus:tw-ring-gazblue sm:tw-text-sm sm:tw-leading-6', {\n          'app-input--textarea': isTextArea.value\n        }],\n        type: type.value === 'date' ? 'text' : type.value,\n        value: value.value,\n        onInput: handleChange\n      });\n      let input = inputSrc;\n\n      if (props.type === 'tel') {\n        input = withDirectives(inputSrc, [[vmaska, '+7(###)###-##-##']]);\n      } else if (props.type === 'date') {\n        input = withDirectives(inputSrc, [[vmaska, '##.##.####']]);\n      }\n\n      if (props.type === 'hidden') {\n        return input;\n      } else {\n        return h('div', {\n          class: 'sm:tw-col-span-3'\n        }, [h(AppLabel, {\n          required: hasRequiredRule.value,\n          label: label.value,\n          for: props.name\n        }), h('div', {\n          class: 'tw-mt-1'\n        }, [input]), errorMessage.value ? h(AppErrMsg, {\n          msg: errorMessage.value\n        }) : null]);\n      }\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["h","computed","toRefs","resolveComponent","resolveDirective","withDirectives","watch","Field","useField","useRules","props","type","default","String","disabled","Boolean","setup","expose","AppErrMsg","AppLabel","vmaska","label","rules","name","value","errorMessage","handleChange","validateOnValueUpdate","isTextArea","hasRequiredRule","inputSrc","id","class","onInput","input","required","for","msg"],"sourceRoot":"","sources":["C:\\projects\\gazprom\\formApplication\\src\\core\\AppInput.vue"],"sourcesContent":["<script>\nimport {\n  h,\n  computed,\n  toRefs,\n  resolveComponent,\n  resolveDirective,\n  withDirectives,\n  watch,\n} from 'vue';\nimport { Field, useField } from 'vee-validate';\nimport useRules from '@/compositions/useRules';\n\nexport default {\n  props: {\n    ...Field.props,\n    type: {\n      default: 'text',\n      type: String,\n    },\n    disabled: {\n      default: false,\n      type: Boolean,\n    },\n  },\n  setup(props, { expose }) {\n    const AppErrMsg = resolveComponent('AppErrorMessage');\n    const AppLabel = resolveComponent('AppLabel');\n    const vmaska = resolveDirective('maska');\n\n    const { type, label, rules, name, disabled } = toRefs(props);\n    const { value, errorMessage, handleChange } = useField(name, rules, {\n      validateOnValueUpdate: true,\n      label: props.label,\n    });\n\n\n    expose({ handleChange });\n\n    const isTextArea = computed(() => type.value === 'textarea');\n    const { hasRequiredRule } = useRules(rules);\n\n    return () => {\n      const inputSrc = h(isTextArea.value ? 'textarea' : 'input', {\n        disabled: disabled.value,\n        id: props.name,\n        name: props.name,\n        class: ['tw-block tw-w-full tw-rounded-md tw-border-0 tw-py-1.5 tw-text-gray-900 tw-shadow-sm tw-ring-1 tw-ring-inset tw-ring-gray-300 placeholder:tw-text-gray-400 focus:tw-ring-2 focus:tw-ring-inset focus:tw-ring-gazblue sm:tw-text-sm sm:tw-leading-6', { 'app-input--textarea': isTextArea.value }],\n        type: type.value === 'date' ? 'text' : type.value,\n        value: value.value,\n        onInput: handleChange,\n      });\n\n      let input = inputSrc;\n\n      if (props.type === 'tel') {\n        input = withDirectives(inputSrc, [[vmaska, '+7(###)###-##-##']]);\n      } else if(props.type === 'date') {\n        input = withDirectives(inputSrc, [[vmaska, '##.##.####']])\n      }\n\n      if (props.type === 'hidden') {\n        return input\n      } else {\n        return h('div', {class: 'sm:tw-col-span-3'}, [\n          h(AppLabel, {\n            required: hasRequiredRule.value,\n            label: label.value,\n            for: props.name,\n          }),\n          h(\n            'div', {class: 'tw-mt-1'}, [\n            input,\n            ]\n          ),\n\n          errorMessage.value ? h(AppErrMsg, { msg: errorMessage.value }) : null,\n        ]);\n      }\n    };\n  },\n};\n</script>\n\n<style scoped>\n.app-input--textarea {\n  min-height: 84px;\n}\n\n.app-input--textarea {\n  @apply tw-h-16;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}