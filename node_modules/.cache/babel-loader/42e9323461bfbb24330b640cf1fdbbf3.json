{"ast":null,"code":"import _wrapRegExp from \"C:/projects/gazprom/formApplication/node_modules/@babel/runtime/helpers/esm/wrapRegExp.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { h, computed, toRefs, resolveComponent } from 'vue';\nimport { Field, useField } from 'vee-validate';\nimport useRules from '@/compositions/useRules';\nexport default {\n  props: {\n    name: String,\n    nameSecond: String,\n    label: String,\n    rules: String\n  },\n  setup: function setup(props) {\n    var _toRefs = toRefs(props),\n        name = _toRefs.name,\n        nameSecond = _toRefs.nameSecond,\n        rules = _toRefs.rules,\n        label = _toRefs.label;\n\n    var naitivePattern = /*#__PURE__*/_wrapRegExp(/^(\\d{4})\\x2D(\\d{2})\\x2D(\\d{2})$/, {\n      year: 1,\n      month: 2,\n      day: 3\n    });\n\n    var localePattern = /*#__PURE__*/_wrapRegExp(/^(\\d{2})\\.(\\d{2})\\.(\\d{4})$/, {\n      day: 1,\n      month: 2,\n      year: 3\n    });\n\n    var _useField = useField(name, props.rules, {\n      label: props.label\n    }),\n        value = _useField.value,\n        handleChange = _useField.handleChange,\n        errorMessage = _useField.errorMessage;\n\n    var _useField2 = useField(nameSecond, props.rules, {\n      label: props.label\n    }),\n        valueSecond = _useField2.value,\n        handleChangeSecond = _useField2.handleChange;\n\n    var _useRules = useRules(rules),\n        hasRequiredRule = _useRules.hasRequiredRule;\n\n    function nativeFormat(value) {\n      if (!value || typeof value !== 'string') return '';\n      var match = value.match(localePattern);\n      var groups = (match === null || match === void 0 ? void 0 : match.groups) || {};\n      var _groups$day = groups.day,\n          day = _groups$day === void 0 ? '' : _groups$day,\n          _groups$month = groups.month,\n          month = _groups$month === void 0 ? '' : _groups$month,\n          _groups$year = groups.year,\n          year = _groups$year === void 0 ? '' : _groups$year;\n      if (!(day && month && year)) return '';\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    }\n\n    function localeFormat(value) {\n      if (!value) return '';\n      var match = value.match(nativePattern);\n      var groups = (match === null || match === void 0 ? void 0 : match.groups) || {};\n      var _groups$day2 = groups.day,\n          day = _groups$day2 === void 0 ? '' : _groups$day2,\n          _groups$month2 = groups.month,\n          month = _groups$month2 === void 0 ? '' : _groups$month2,\n          _groups$year2 = groups.year,\n          year = _groups$year2 === void 0 ? '' : _groups$year2;\n      if (!(day && month && year)) return '';\n      return \"\".concat(day, \".\").concat(month, \".\").concat(year);\n    }\n\n    var displayVal = computed(function () {\n      return nativeFormat(value.value);\n    });\n    var displayValSecond = computed(function () {\n      return nativeFormat(valueSecond.value);\n    });\n\n    var onInput = function onInput(_ref) {\n      var value = _ref.target.value;\n      handleChange(localeFormat(value));\n    };\n\n    var onInputSecond = function onInputSecond(_ref2) {\n      var value = _ref2.target.value;\n      handleChangeSecond(localeFormat(value));\n    };\n\n    var AppErrorMessage = resolveComponent('AppErrorMessage');\n    var AppLabel = resolveComponent('AppLabel');\n    return {\n      displayVal: displayVal,\n      displayValSecond: displayValSecond,\n      onInput: onInput,\n      onInputSecond: onInputSecond,\n      errorMessage: errorMessage,\n      hasRequiredRule: hasRequiredRule,\n      label: label\n    };\n  }\n};","map":{"version":3,"mappings":";;;;;AAwBA,SAASA,CAAT,EAAYC,QAAZ,EAAsBC,MAAtB,EAA8BC,gBAA9B,QAAsD,KAAtD;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,cAAhC;AACA,OAAOC,QAAP,MAAqB,yBAArB;AAEA,eAAe;AACbC,OAAK,EAAE;AACLC,QAAI,EAAEC,MADD;AAELC,cAAU,EAAED,MAFP;AAGLE,SAAK,EAAEF,MAHF;AAILG,SAAK,EAAEH;AAJF,GADM;AAObI,OAPa,iBAOPN,KAPO,EAOA;AACX,kBAA2CL,MAAM,CAACK,KAAD,CAAjD;AAAA,QAAQC,IAAR,WAAQA,IAAR;AAAA,QAAcE,UAAd,WAAcA,UAAd;AAAA,QAA0BE,KAA1B,WAA0BA,KAA1B;AAAA,QAAiCD,KAAjC,WAAiCA,KAAjC;;AAEA,QAAMG,cAAa,4BAAI,iCAAJ;AAAA;AAAA;AAAA;AAAA,MAAnB;;AACA,QAAMC,aAAY,4BAAI,6BAAJ;AAAA;AAAA;AAAA;AAAA,MAAlB;;AAEA,oBAA8CV,QAAQ,CAACG,IAAD,EAAOD,KAAK,CAACK,KAAb,EAAoB;AACxED,WAAK,EAAEJ,KAAK,CAACI;AAD2D,KAApB,CAAtD;AAAA,QAAQK,KAAR,aAAQA,KAAR;AAAA,QAAeC,YAAf,aAAeA,YAAf;AAAA,QAA6BC,YAA7B,aAA6BA,YAA7B;;AAIA,qBAAiEb,QAAQ,CACrEK,UADqE,EAErEH,KAAK,CAACK,KAF+D,EAGrE;AACED,WAAK,EAAEJ,KAAK,CAACI;AADf,KAHqE,CAAzE;AAAA,QAAeQ,WAAf,cAAQH,KAAR;AAAA,QAA0CI,kBAA1C,cAA4BH,YAA5B;;AAQA,oBAA4BX,QAAQ,CAACM,KAAD,CAApC;AAAA,QAAQS,eAAR,aAAQA,eAAR;;AAEA,aAASC,YAAT,CAAsBN,KAAtB,EAA6B;AAC3B,UAAI,CAACA,KAAD,IAAU,OAAOA,KAAP,KAAiB,QAA/B,EAAyC,OAAO,EAAP;AACzC,UAAMO,KAAI,GAAIP,KAAK,CAACO,KAAN,CAAYR,aAAZ,CAAd;AACA,UAAMS,MAAK,GAAI,MAAK,SAAL,SAAK,WAAL,iBAAK,CAAEA,MAAP,KAAiB,EAAhC;AACA,wBAA4CA,MAA5C,CAAQC,GAAR;AAAA,UAAQA,GAAR,4BAAc,EAAd;AAAA,0BAA4CD,MAA5C,CAAkBE,KAAlB;AAAA,UAAkBA,KAAlB,8BAA0B,EAA1B;AAAA,yBAA4CF,MAA5C,CAA8BG,IAA9B;AAAA,UAA8BA,IAA9B,6BAAqC,EAArC;AACA,UAAI,EAAEF,GAAE,IAAKC,KAAP,IAAgBC,IAAlB,CAAJ,EAA6B,OAAO,EAAP;AAC7B,uBAAUA,IAAV,cAAkBD,KAAlB,cAA2BD,GAA3B;AACF;;AAEA,aAASG,YAAT,CAAsBZ,KAAtB,EAA6B;AAC3B,UAAI,CAACA,KAAL,EAAY,OAAO,EAAP;AACZ,UAAMO,KAAI,GAAIP,KAAK,CAACO,KAAN,CAAYM,aAAZ,CAAd;AACA,UAAML,MAAK,GAAI,MAAK,SAAL,SAAK,WAAL,iBAAK,CAAEA,MAAP,KAAiB,EAAhC;AACA,yBAA4CA,MAA5C,CAAQC,GAAR;AAAA,UAAQA,GAAR,6BAAc,EAAd;AAAA,2BAA4CD,MAA5C,CAAkBE,KAAlB;AAAA,UAAkBA,KAAlB,+BAA0B,EAA1B;AAAA,0BAA4CF,MAA5C,CAA8BG,IAA9B;AAAA,UAA8BA,IAA9B,8BAAqC,EAArC;AACA,UAAI,EAAEF,GAAE,IAAKC,KAAP,IAAgBC,IAAlB,CAAJ,EAA6B,OAAO,EAAP;AAC7B,uBAAUF,GAAV,cAAiBC,KAAjB,cAA0BC,IAA1B;AACF;;AAEA,QAAMG,UAAS,GAAI7B,QAAQ,CAAC;AAAA,aAAMqB,YAAY,CAACN,KAAK,CAACA,KAAP,CAAlB;AAAA,KAAD,CAA3B;AACA,QAAMe,gBAAe,GAAI9B,QAAQ,CAAC;AAAA,aAAMqB,YAAY,CAACH,WAAW,CAACH,KAAb,CAAlB;AAAA,KAAD,CAAjC;;AAEA,QAAMgB,OAAM,GAAI,SAAVA,OAAU,OAA2B;AAAA,UAAdhB,KAAc,QAAxBiB,MAAwB,CAAdjB,KAAc;AACzCC,kBAAY,CAACW,YAAY,CAACZ,KAAD,CAAb,CAAZ;AACD,KAFD;;AAIA,QAAMkB,aAAY,GAAI,SAAhBA,aAAgB,QAA2B;AAAA,UAAdlB,KAAc,SAAxBiB,MAAwB,CAAdjB,KAAc;AAC/CI,wBAAkB,CAACQ,YAAY,CAACZ,KAAD,CAAb,CAAlB;AACD,KAFD;;AAIA,QAAMmB,eAAc,GAAIhC,gBAAgB,CAAC,iBAAD,CAAxC;AACA,QAAMiC,QAAO,GAAIjC,gBAAgB,CAAC,UAAD,CAAjC;AAEA,WAAO;AACL2B,gBAAU,EAAVA,UADK;AAELC,sBAAgB,EAAhBA,gBAFK;AAGLC,aAAO,EAAPA,OAHK;AAILE,mBAAa,EAAbA,aAJK;AAKLhB,kBAAY,EAAZA,YALK;AAMLG,qBAAe,EAAfA,eANK;AAOLV,WAAK,EAALA;AAPK,KAAP;AASD;AApEY,CAAf","names":["h","computed","toRefs","resolveComponent","Field","useField","useRules","props","name","String","nameSecond","label","rules","setup","naitivePattern","localePattern","value","handleChange","errorMessage","valueSecond","handleChangeSecond","hasRequiredRule","nativeFormat","match","groups","day","month","year","localeFormat","nativePattern","displayVal","displayValSecond","onInput","target","onInputSecond","AppErrorMessage","AppLabel"],"sourceRoot":"","sources":["C:\\projects\\gazprom\\formApplication\\src\\core\\AppDateInterval.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <AppLabel :label=\"label\" :for=\"name\" :required=\"hasRequiredRule\" />\r\n    <div class=\"flex\">\r\n      <input\r\n          :id=\"name\"\r\n          class=\"app-input\"\r\n          type=\"date\"\r\n          :value=\"displayVal\"\r\n          @input=\"onInput\"\r\n      />\r\n      <input\r\n          :id=\"nameSecond\"\r\n          class=\"app-input ml-2\"\r\n          type=\"date\"\r\n          :value=\"displayValSecond\"\r\n          @input=\"onInputSecond\"\r\n      />\r\n    </div>\r\n    <AppErrorMessage :msg=\"errorMessage\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { h, computed, toRefs, resolveComponent } from 'vue';\r\nimport { Field, useField } from 'vee-validate';\r\nimport useRules from '@/compositions/useRules';\r\n\r\nexport default {\r\n  props: {\r\n    name: String,\r\n    nameSecond: String,\r\n    label: String,\r\n    rules: String,\r\n  },\r\n  setup(props) {\r\n    const { name, nameSecond, rules, label } = toRefs(props);\r\n\r\n    const naitivePattern = /^(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})$/;\r\n    const localePattern = /^(?<day>\\d{2})\\.(?<month>\\d{2})\\.(?<year>\\d{4})$/;\r\n\r\n    const { value, handleChange, errorMessage } = useField(name, props.rules, {\r\n      label: props.label,\r\n    });\r\n\r\n    const { value: valueSecond, handleChange: handleChangeSecond } = useField(\r\n        nameSecond,\r\n        props.rules,\r\n        {\r\n          label: props.label,\r\n        }\r\n    );\r\n\r\n    const { hasRequiredRule } = useRules(rules);\r\n\r\n    function nativeFormat(value) {\r\n      if (!value || typeof value !== 'string') return '';\r\n      const match = value.match(localePattern);\r\n      const groups = match?.groups || {};\r\n      const { day = '', month = '', year = '' } = groups;\r\n      if (!(day && month && year)) return '';\r\n      return `${year}-${month}-${day}`;\r\n    }\r\n\r\n    function localeFormat(value) {\r\n      if (!value) return '';\r\n      const match = value.match(nativePattern);\r\n      const groups = match?.groups || {};\r\n      const { day = '', month = '', year = '' } = groups;\r\n      if (!(day && month && year)) return '';\r\n      return `${day}.${month}.${year}`;\r\n    }\r\n\r\n    const displayVal = computed(() => nativeFormat(value.value));\r\n    const displayValSecond = computed(() => nativeFormat(valueSecond.value));\r\n\r\n    const onInput = ({ target: { value } }) => {\r\n      handleChange(localeFormat(value));\r\n    };\r\n\r\n    const onInputSecond = ({ target: { value } }) => {\r\n      handleChangeSecond(localeFormat(value));\r\n    };\r\n\r\n    const AppErrorMessage = resolveComponent('AppErrorMessage');\r\n    const AppLabel = resolveComponent('AppLabel');\r\n\r\n    return {\r\n      displayVal,\r\n      displayValSecond,\r\n      onInput,\r\n      onInputSecond,\r\n      errorMessage,\r\n      hasRequiredRule,\r\n      label,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-input {\r\n  @apply tw-border tw-border-gray-400 tw-rounded-lg tw-h-8 tw-px-2 tw-block tw-w-full;\r\n}\r\n.app-input:hover,\r\n.app-input:focus {\r\n  @apply tw-border-primary;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}