{"ast":null,"code":"import _wrapRegExp from \"C:/projects/gazprom/formApplication/node_modules/@babel/runtime/helpers/esm/wrapRegExp.js\";\nimport _objectSpread from \"C:/projects/gazprom/formApplication/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport { h, computed, toRefs, resolveComponent } from 'vue';\nimport { Field, useField } from 'vee-validate';\nimport useRules from '@/compositions/useRules';\nexport default {\n  props: _objectSpread({}, Field.props),\n  setup: function setup(props) {\n    var naitivePattern = /*#__PURE__*/_wrapRegExp(/^(\\d{4})\\x2D(\\d{2})\\x2D(\\d{2})$/, {\n      year: 1,\n      month: 2,\n      day: 3\n    });\n\n    var localePattern = /*#__PURE__*/_wrapRegExp(/^(\\d{2})\\.(\\d{2})\\.(\\d{4})$/, {\n      day: 1,\n      month: 2,\n      year: 3\n    });\n\n    var _toRefs = toRefs(props),\n        name = _toRefs.name,\n        rules = _toRefs.rules,\n        label = _toRefs.label;\n\n    var _useField = useField(name, props.rules, {\n      label: props.label\n    }),\n        value = _useField.value,\n        handleChange = _useField.handleChange,\n        errorMessage = _useField.errorMessage;\n\n    var _useRules = useRules(rules),\n        hasRequiredRule = _useRules.hasRequiredRule;\n\n    function naitiveFormat(value) {\n      if (!value || typeof value !== 'string') return '';\n      var match = value.match(localePattern);\n      var groups = (match === null || match === void 0 ? void 0 : match.groups) || {};\n      var _groups$day = groups.day,\n          day = _groups$day === void 0 ? '' : _groups$day,\n          _groups$month = groups.month,\n          month = _groups$month === void 0 ? '' : _groups$month,\n          _groups$year = groups.year,\n          year = _groups$year === void 0 ? '' : _groups$year;\n      if (!(day && month && year)) return '';\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    }\n\n    function localeFormat(value) {\n      if (!value) return '';\n      var match = value.match(naitivePattern);\n      var groups = (match === null || match === void 0 ? void 0 : match.groups) || {};\n      var _groups$day2 = groups.day,\n          day = _groups$day2 === void 0 ? '' : _groups$day2,\n          _groups$month2 = groups.month,\n          month = _groups$month2 === void 0 ? '' : _groups$month2,\n          _groups$year2 = groups.year,\n          year = _groups$year2 === void 0 ? '' : _groups$year2;\n      if (!(day && month && year)) return '';\n      return \"\".concat(day, \".\").concat(month, \".\").concat(year);\n    }\n\n    var dispalyVal = computed(function () {\n      return naitiveFormat(value.value);\n    });\n\n    var onInput = function onInput(_ref) {\n      var value = _ref.target.value;\n      handleChange(localeFormat(value));\n    };\n\n    var AppErrMsg = resolveComponent('AppErrorMessage');\n    var AppLabel = resolveComponent('AppLabel');\n    return function () {\n      var input = h('input', {\n        id: props.name,\n        class: 'app-input',\n        type: 'date',\n        onInput: onInput,\n        value: dispalyVal.value\n      });\n      return h('div', [h(AppLabel, {\n        required: hasRequiredRule.value,\n        label: props.label,\n        for: props.name\n      }), input, errorMessage.value ? h(AppErrMsg, {\n        msg: errorMessage.value\n      }) : null]);\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["h","computed","toRefs","resolveComponent","Field","useField","useRules","props","setup","naitivePattern","localePattern","name","rules","label","value","handleChange","errorMessage","hasRequiredRule","naitiveFormat","match","groups","day","month","year","localeFormat","dispalyVal","onInput","target","AppErrMsg","AppLabel","input","id","class","type","required","for","msg"],"sourceRoot":"","sources":["C:\\projects\\gazprom\\formApplication\\src\\core\\AppDatePicker.vue"],"sourcesContent":["<script>\nimport { h, computed, toRefs, resolveComponent } from 'vue';\nimport { Field, useField } from 'vee-validate';\nimport useRules from '@/compositions/useRules';\n\nexport default {\n  props: {\n    ...Field.props,\n  },\n  setup(props) {\n    const naitivePattern = /^(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})$/;\n    const localePattern = /^(?<day>\\d{2})\\.(?<month>\\d{2})\\.(?<year>\\d{4})$/;\n\n    const { name, rules, label } = toRefs(props);\n\n    const { value, handleChange, errorMessage } = useField(name, props.rules, {\n      label: props.label,\n    });\n\n    const { hasRequiredRule } = useRules(rules);\n\n    function naitiveFormat(value) {\n      if (!value || typeof value !== 'string') return '';\n      const match = value.match(localePattern);\n      const groups = match?.groups || {};\n      const { day = '', month = '', year = '' } = groups;\n      if (!(day && month && year)) return '';\n      return `${year}-${month}-${day}`;\n    }\n\n    function localeFormat(value) {\n      if (!value) return '';\n      const match = value.match(naitivePattern);\n      const groups = match?.groups || {};\n      const { day = '', month = '', year = '' } = groups;\n      if (!(day && month && year)) return '';\n      return `${day}.${month}.${year}`;\n    }\n\n    const dispalyVal = computed(() => naitiveFormat(value.value));\n\n    const onInput = ({ target: { value } }) => {\n      handleChange(localeFormat(value));\n    };\n\n    const AppErrMsg = resolveComponent('AppErrorMessage');\n    const AppLabel = resolveComponent('AppLabel');\n\n    return () => {\n      const input = h('input', {\n        id: props.name,\n        class: 'app-input',\n        type: 'date',\n        onInput,\n        value: dispalyVal.value,\n      });\n\n      return h('div', [\n        h(AppLabel, {\n          required: hasRequiredRule.value,\n          label: props.label,\n          for: props.name,\n        }),\n        input,\n        errorMessage.value ? h(AppErrMsg, { msg: errorMessage.value }) : null,\n      ]);\n    };\n  },\n};\n</script>\n\n<style scoped>\n.app-input {\n  @apply tw-border tw-border-gray-400 tw-rounded-lg tw-h-8 tw-px-2 tw-block tw-w-full;\n}\n.app-input:hover,\n.app-input:focus {\n  @apply tw-border-primary;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}