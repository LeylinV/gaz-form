{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-6e7e9bc6\"), n = n(), _popScopeId(), n;\n};\n\nvar _hoisted_1 = {\n  class: \"flex\"\n};\nvar _hoisted_2 = [\"id\", \"value\"];\nvar _hoisted_3 = [\"id\", \"value\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_AppLabel = _resolveComponent(\"AppLabel\");\n\n  var _component_AppErrorMessage = _resolveComponent(\"AppErrorMessage\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_AppLabel, {\n    label: $setup.label,\n    for: $props.name,\n    required: $setup.hasRequiredRule\n  }, null, 8\n  /* PROPS */\n  , [\"label\", \"for\", \"required\"]), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"input\", {\n    id: $props.name,\n    class: \"app-input\",\n    type: \"date\",\n    value: $setup.displayVal,\n    onInput: _cache[0] || (_cache[0] = function () {\n      return $setup.onInput && $setup.onInput.apply($setup, arguments);\n    })\n  }, null, 40\n  /* PROPS, HYDRATE_EVENTS */\n  , _hoisted_2), _createElementVNode(\"input\", {\n    id: $props.nameSecond,\n    class: \"app-input ml-2\",\n    type: \"date\",\n    value: $setup.displayValSecond,\n    onInput: _cache[1] || (_cache[1] = function () {\n      return $setup.onInputSecond && $setup.onInputSecond.apply($setup, arguments);\n    })\n  }, null, 40\n  /* PROPS, HYDRATE_EVENTS */\n  , _hoisted_3)]), _createVNode(_component_AppErrorMessage, {\n    msg: $setup.errorMessage\n  }, null, 8\n  /* PROPS */\n  , [\"msg\"])]);\n}","map":{"version":3,"mappings":";;;;;;;;AAGSA,OAAK,EAAC;;;;;;;;;uBAFbC,oBAmBM,KAnBN,EAmBM,IAnBN,EAmBM,CAlBJC,aAAmEC,mBAAnE,EAAmE;AAAxDC,SAAK,EAAEC,YAAiD;AAAzCC,OAAG,EAAEC,WAAoC;AAA7BC,YAAQ,EAAEH;AAAmB,GAAnE;;AAAA,iCAkBI,EAjBJI,oBAeM,KAfN,cAeM,CAdJA,oBAME,OANF,EAME;AALGC,MAAE,EAAEH,WAKP;AAJEP,SAAK,EAAC,WAIR;AAHEW,QAAI,EAAC,MAGP;AAFGC,SAAK,EAAEP,iBAEV;AADGQ,WAAK;AAAA,aAAER,yDAAF;AAAA;AACR,GANF;;AAAA,eAcI,EAPJI,oBAME,OANF,EAME;AALGC,MAAE,EAAEH,iBAKP;AAJEP,SAAK,EAAC,gBAIR;AAHEW,QAAI,EAAC,MAGP;AAFGC,SAAK,EAAEP,uBAEV;AADGQ,WAAK;AAAA,aAAER,qEAAF;AAAA;AACR,GANF;;AAAA,eAOI,CAfN,CAiBI,EADJH,aAAuCY,0BAAvC,EAAuC;AAArBC,OAAG,EAAEV;AAAgB,GAAvC,EAAmC,IAAnC,EAAmC;AAAA;AAAnC,IAAmC,OAAnC,CACI,CAnBN","names":["class","_createElementBlock","_createVNode","_component_AppLabel","label","$setup","for","$props","required","_createElementVNode","id","type","value","onInput","_component_AppErrorMessage","msg"],"sourceRoot":"","sources":["C:\\projects\\gazprom\\formApplication\\src\\core\\AppDateInterval.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <AppLabel :label=\"label\" :for=\"name\" :required=\"hasRequiredRule\" />\r\n    <div class=\"flex\">\r\n      <input\r\n          :id=\"name\"\r\n          class=\"app-input\"\r\n          type=\"date\"\r\n          :value=\"displayVal\"\r\n          @input=\"onInput\"\r\n      />\r\n      <input\r\n          :id=\"nameSecond\"\r\n          class=\"app-input ml-2\"\r\n          type=\"date\"\r\n          :value=\"displayValSecond\"\r\n          @input=\"onInputSecond\"\r\n      />\r\n    </div>\r\n    <AppErrorMessage :msg=\"errorMessage\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { h, computed, toRefs, resolveComponent } from 'vue';\r\nimport { Field, useField } from 'vee-validate';\r\nimport useRules from '@/compositions/useRules';\r\n\r\nexport default {\r\n  props: {\r\n    name: String,\r\n    nameSecond: String,\r\n    label: String,\r\n    rules: String,\r\n  },\r\n  setup(props) {\r\n    const { name, nameSecond, rules, label } = toRefs(props);\r\n\r\n    const naitivePattern = /^(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})$/;\r\n    const localePattern = /^(?<day>\\d{2})\\.(?<month>\\d{2})\\.(?<year>\\d{4})$/;\r\n\r\n    const { value, handleChange, errorMessage } = useField(name, props.rules, {\r\n      label: props.label,\r\n    });\r\n\r\n    const { value: valueSecond, handleChange: handleChangeSecond } = useField(\r\n        nameSecond,\r\n        props.rules,\r\n        {\r\n          label: props.label,\r\n        }\r\n    );\r\n\r\n    const { hasRequiredRule } = useRules(rules);\r\n\r\n    function nativeFormat(value) {\r\n      if (!value || typeof value !== 'string') return '';\r\n      const match = value.match(localePattern);\r\n      const groups = match?.groups || {};\r\n      const { day = '', month = '', year = '' } = groups;\r\n      if (!(day && month && year)) return '';\r\n      return `${year}-${month}-${day}`;\r\n    }\r\n\r\n    function localeFormat(value) {\r\n      if (!value) return '';\r\n      const match = value.match(nativePattern);\r\n      const groups = match?.groups || {};\r\n      const { day = '', month = '', year = '' } = groups;\r\n      if (!(day && month && year)) return '';\r\n      return `${day}.${month}.${year}`;\r\n    }\r\n\r\n    const displayVal = computed(() => nativeFormat(value.value));\r\n    const displayValSecond = computed(() => nativeFormat(valueSecond.value));\r\n\r\n    const onInput = ({ target: { value } }) => {\r\n      handleChange(localeFormat(value));\r\n    };\r\n\r\n    const onInputSecond = ({ target: { value } }) => {\r\n      handleChangeSecond(localeFormat(value));\r\n    };\r\n\r\n    const AppErrorMessage = resolveComponent('AppErrorMessage');\r\n    const AppLabel = resolveComponent('AppLabel');\r\n\r\n    return {\r\n      displayVal,\r\n      displayValSecond,\r\n      onInput,\r\n      onInputSecond,\r\n      errorMessage,\r\n      hasRequiredRule,\r\n      label,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-input {\r\n  @apply tw-border tw-border-gray-400 tw-rounded-lg tw-h-8 tw-px-2 tw-block tw-w-full;\r\n}\r\n.app-input:hover,\r\n.app-input:focus {\r\n  @apply tw-border-primary;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}